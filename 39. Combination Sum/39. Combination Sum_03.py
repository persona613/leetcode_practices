"""
Last Executed Input
[5,10,8,4,3,12,9]
27
output = [[3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,4,5],[3,3,3,3,3,3,9],[3,3,3,3,3,4,4,4],[3,3,3,3,3,4,8],[3,3,3,3,3,12],[3,3,3,3,5,5,5],[3,3,3,3,5,10],[3,3,3,4,4,5,5],[3,3,3,4,4,10],[3,3,3,4,5,9],[3,3,3,5,5,8],[3,3,3,8,10],[3,3,3,9,9],[3,3,4,4,4,9],[3,3,4,4,5,8],[3,3,4,5,12],[3,3,4,8,9],[3,3,5,8,8],[3,3,9,12],[3,4,4,4,4,4,4],[3,4,4,4,4,8],[3,4,4,4,12],[3,4,4,8,8],[3,4,5,5,5,5],[3,4,5,5,10],[3,4,8,12],[3,4,10,10],[3,5,5,5,9],[3,5,9,10],[3,8,8,8],[3,12,12],[4,4,4,5,5,5],[4,4,4,5,10],[4,4,5,5,9],[4,4,9,10],[4,5,5,5,8],[4,5,8,10],[4,5,9,9],[5,5,5,12],[5,5,8,9],[5,10,12],[8,9,10],[9,9,9]]
expected = [[5,5,5,5,4,3],[5,5,5,8,4],[5,5,5,4,4,4],[5,5,5,3,3,3,3],[5,5,5,3,9],[5,5,5,12],[5,5,10,4,3],[5,5,8,3,3,3],[5,5,8,9],[5,5,4,4,3,3,3],[5,5,4,4,9],[5,10,8,4],[5,10,4,4,4],[5,10,3,3,3,3],[5,10,3,9],[5,10,12],[5,8,8,3,3],[5,8,4,4,3,3],[5,4,4,4,4,3,3],[5,4,3,3,3,3,3,3],[5,4,3,3,3,9],[5,4,3,3,12],[5,4,9,9],[10,10,4,3],[10,8,3,3,3],[10,8,9],[10,4,4,3,3,3],[10,4,4,9],[8,8,8,3],[8,8,4,4,3],[8,4,4,4,4,3],[8,4,3,3,3,3,3],[8,4,3,3,9],[8,4,3,12],[4,4,4,4,4,4,3],[4,4,4,3,3,3,3,3],[4,4,4,3,3,9],[4,4,4,3,12],[3,3,3,3,3,3,3,3,3],[3,3,3,3,3,3,9],[3,3,3,3,3,12],[3,3,3,9,9],[3,3,12,9],[3,12,12],[9,9,9]]
output have no [5, 4, 4, 4, 4, 3, 3], bcz [5, 5, 4, 4, 3, 3, 3] append in seen
"""
class Solution:
    def combinationSum(self, candidates: List[int], target: int) -> List[List[int]]:
        
        def pick(t):
            if t < 0:
                return
            for num in candidates: 
                combine.append(num)
                if t - num == 0:
                    if set(combine) not in seen[len(combine)]:
                        res.append(combine[:])
                        seen[len(combine)].append(set(combine))
                    combine.pop()
                    return
                else:
                    pick(t - num)
                    combine.pop()
        
        res = []
        combine = []
        seen = defaultdict(list)
        candidates.sort()
        pick(target)
        return res